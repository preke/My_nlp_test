# My_nlp_test
some primary nlp codes....
涉及到很多基础的nlp算法

简述一下所做的事情吧

## 目的：

做两类文本的匹配：简历数据，招聘要求

- step 1:
 先对每条数据分词, 用```jieba```就好, 分词结果存起来

- step 2:
```tf-idf```提取关键字，我使用```gensim```的```tf-idf```, 简单粗暴的提取每个文本```tf-idf```值前10的词语，但是师兄说效果不太好，所以先不管这个结果

- step 3:
用```word2vec```
同样是使用```gensim```的```word2vec```
问了一下大概的思路：
w2v是将每个单词映射成一个向量，然后一条数据，就是把这个数据中的所有分词的向量加起来表示这个doc的向量
然后这里加分词的向量的时候加上了tf-idf的权重
> 49999 条**公司要求**的分词结果
>* 58713 bad datas
(就是有58713个词的vector由于与tf-idf的dictionary冲突，导致没能加到每个公司要求的向量中)


至此，得到了 每个公司要求的向量

- step 4: 
按照同样的方法去把简历信息的数据跑出来

> 54559 条 **简历信息**的分词结果

>* 10549 bad datas
  (和上面的代码一样，只是换了输入文件)

至此更加担心，数据量太少训练出来的模型不完美

- step 5:
现在该去做相似度的检测，两个向量的相似度，该用怎样的去衡量方法呢？
还是说可以比较？
我先暂时采用余弦相似度吧

嗯，到现在写了一个最简单的余弦相似度的测量
我本来想搜一下，是否gensim有没有针对简单的余弦相似度的一些优化，但是发现没有针对```word2vec```的
有的是直接对文本的分词结果的一个Similarity的检测
其实又不知道通过```word2vec``` + ```tf-idf weight```这样的方法会不会比直接调库的效果好。如果没有的话，感觉也会很尴尬

###结果：
跑出来的结果
我用第一条公司要求来试，然后余弦相似度前10的是：
```
0.321505739779
0.280549374192
0.280302881254
0.278797774437
0.275505419223
0.267415727637
0.267355878316
0.265260164176
0.260343656201
0.259980257711
[2187, 33215, 29315, 6920, 8961, 33776, 33767, 42047, 37196, 27834]
```


|公司要求|推荐简历|相似度|
|---|:---|:---|
|0|2187|0.321505739779|
|0|33215|0.280549374192|
|0|29315|0.280302881254|
|0|6920|0.278797774437|
|0|8961|0.275505419223|

具体的要求信息，简历信息如下：

>* **Num.0 要求**
职位描述 乐视招聘android自动化测试工程师 岗位职责:1、负责android超级电视TV设备的自动化方案设计、自动化测试与工具开发； 2、根据项目特点研究稳定性测试技术,完成相关工具的开发以及测试； 技能要求:1、有移动终端自动化工具架构设计与开发者优先,熟悉Android自动化工具Uiautomator、Monkey、MonkeyRunner 2、有实际用过JAVA/Python语言写过自动化测试脚本来测试项目的经验； 3、有Android自动化测试/稳定性测试经验,熟练掌握白盒测试工具JUnit、Instrumentation等； 4、熟悉linux命令,我们的工作环境是ubuntu操作系统 5、熟练使用git/svn等版本控制工具； 6、本科及以上学历（在职或者自考的本科可能暂时不考虑,ＨＲ要求的,特别优秀的除外）； PS:java/python编程开发基础扎实优先,有uiautomator实际项目经验者优先 个性能力要求:1. 主动思考、积极向上,有较强的逻辑分析能力和学习能力。 2. 工作细心、耐心、有责任心。 3. 具有良好的沟通能力和团队合作精神。 福利:转正后全员持股、年底奖金、带薪年假、餐补、交通补、通讯补等。
>* **Num.2187 简历**
男	182.3111629	本科	物流管理	广告/会展/公关	销售管理 采购/贸易	销售管理,采购/贸易	互联网/电子商务,网络游戏,影视/媒体/艺术/文化传播,公关/市场推广/会展,快速消费品(食品、饮料、化妆品) ,家具/家电/工艺品/玩具/珠宝,办公用品及设备 ,服装/纺织/皮革,娱乐/休闲/体育,环保,政府/公共事业	15000-25000
>* **Num.33215 简历**
女	129.7772242	本科	英语	中介服务	网络工程师	网络工程师	互联网/电子商务	8001-10000
>* **Num.29315 简历**
女	250.4403654	硕士	设计艺术学(人机方向）	互联网/电子商务	计算机软件/系统集成 IT品管/技术支持及其它	计算机软件/系统集成,IT品管/技术支持及其它	其他行业	面议
>* **Num.6920 简历**
男	216.6045998	本科	工商管理	物业管理/商业中心	行政主管	行政主管	互联网/电子商务,物业管理/商业中心,制药/生物工程,快速消费品(食品、饮料、化妆品) ,其他行业	10-150000

>* **Num.8961 简历**
男	234.0766106	本科	高分子材料与工程	快速消费品(食品、饮料、化妆品)	高级生产主管	生产经理/车间主任,化工	石油/化工/矿产/地质,环保,原材料和加工,建筑/建材/工程,贸易/进出口	2000-2999

---
所以效果不是太好呀...尴尬了
这次开始上传ipynb吧，方便一点

## 问题：

>比如说我通过一家公司的要求去推荐简历：
我先拿到了这个要求的w2v向量v1
然后从建立的这个w2v集合里面去和每一个向量做，比如，余弦相似性的检测
然后，我得到了相似性的排序结果，
那我直接按照排序结果，比如取前10的推荐给公司不久好了么？
或者简单来说，是可以根据相似度最高的结点的聚类

是可以的，但是可能会有点low



> 我也和垚明讨论了一下，也是刚开始的时候我们考虑的一个问题，无监督的话，怎样去评判我们推荐的结果的好坏呢？

人工对公告打label，然后提取一些关键字，做监督训练
或者现在的做法就是简单的去做无监督，先去看什么效果

> 有监督的情况下怎样改进模型，无监督的情况又该怎样改进？

加权值吗？这个待解决....


